/******************************************************************************
* File Name: LKA_ADC_module.c
* Description:  This file contains function Prototypes of ADC module
* Tool-Chain: AVR
*
* Modification History:
*  Created by: Sankeerth Potelu
*
******************************************************************************/

/******************************************************************************
*                      Includes
******************************************************************************/
#include"LKA_ADC_module.h"
/******************************************************************************
*                      Defines and data types
******************************************************************************/

/******************************************************************************
*                      Global variables
******************************************************************************/

/******************************************************************************
*                      Static variables
******************************************************************************/
/******************************************************************************
*                      Internal function prototypes
******************************************************************************/


/******************************************************************************
*                      Public functions
******************************************************************************/


void LKA_InitADC()
{
 // Select Vref=AVcc
 ADMUX |= (1<<REFS0);
 //set prescaller to 128 and enable ADC
 ADCSRA |= (1<<ADPS2)|(1<<ADPS1)|(1<<ADPS0)|(1<<ADEN);
}


uint16_t LKA_ReadADC(uint8_t ADCchannel)
{
 //select ADC channel with safety mask
 ADMUX = (ADMUX & 0xF0) | (ADCchannel & 0x0F);
 //single conversion mode
 ADCSRA |= (1<<ADSC);
 // wait until ADC conversion is complete
 while( ADCSRA & (1<<ADSC) );
 return ADC;
}


/******************************************************************************
*                      Internal functions
******************************************************************************/


/******************************************************************************
*                      End of File
******************************************************************************/

